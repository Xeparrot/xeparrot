---
title: AdUp.io Shopper API

language_tabs:
  - curl

toc_footers:
  - <a href='https://adup.io'>Developed by Sanjaya Senevirathne</a>

includes:
  - errors

search: true

code_clipboard: true

meta:
  - name: description
    content: Documentation for the Adup.io Shopper API V3
---

# API Reference

## Introduction

Welcome to the AdUp.io Shopper API Version 3. You can use this API to access AdUp.io Shopper API endpoints, which can get information of various shoppers, products, webauthn, auth, payment details and addresses in the database.

We have language bindings in curl You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.

## Base URL

`https://v3-shopper-api.adup.io/api/v1`

## Response Structure

Key | Type | Description
--------- | ------- |  ------- | -----------
success | bool | This flag will be true if the request completed with no errors, if you get a false value check for the errors key
result | object/array | Requested result will be here
errors | array | You will receive errors here if the success flag is false
messages | array | If you are expecting any messages with the response those will be here
result_info | array | Any other details related to the request

## Authentication

Bearer authentication (also called token authentication) is an HTTP authentication scheme that involves security tokens called bearer tokens. The name ‚ÄúBearer authentication‚Äù can be understood as ‚Äúgive access to the bearer of this token.‚Äù The bearer token is a cryptic string, usually generated by the server in response to a login request. The client must send this token in the Authorization header when making requests to protected resources:

    `Authorization: Bearer <token>`

# App Intialization

## Init Request

This endpoint is used for app initiation, and when this endpoint is called it will provide all the required details to serve the initial interface. You only need to make this request when the app is loaded or reloaded.

<aside class="notice">
    if you send a valid bearer authentication token you will get the shopper object on this response
</aside>

### Method
`Method: GET`

### Endpoint
`https://v3-shopper-api.adup.io/api/v1/init?mode=fastcheckout&shop_id={{shop_id}}&products={{products}}`

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
mode | string | Yes | Currently support fastcheckout & autofill modes
shop_id | init | No | Required for fastcheckout mode. Shop ID of the visiting shop
products | sting | No | Required for fastcheckout mode. Comma separated string of all product SKUs

### Header Params

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
autofill-api-key | string | Yes (autofill mode) | This header will be used to identify the domain and other details of the autofill integration 


## Response (Fast Checkout)

```shell
curl --location --request GET 'https://v3-shopper-api.adup.io/api/v1/init?mode=fastcheckout&shop_id=1&products=sku1,sku2'
```

> The above command returns JSON structured like this:

```json

    {
       {
           "success": true,
           "result": {
               "shop": {
                   "id": 1,
                   "initial": "Maynard",
                   "name": "Maya",
                   "currency": "EUR",
                   "slug": null,
                   "domain": null,
                   "subdomain": null,
                   "total_products": 10
               },
               "products": [],
               "user_data": {
                   "device_ip": "127.0.0.1",
                   "device_country": false,
                   "browser_language": null,
                   "browser_name": "",
                   "is_bot": true,
                   "os": ""
               },
               "app_data": {
                   "static_base_url": "http://localhost:8000",
                   "api_version": "v1.0",
                   "countries": {
                       "AF": {
                           "name": "Afghanistan",
                           "dial_code": "+93",
                           "flag": "üá¶üá´"
                       },
                       ...
                   }
               },
               "payment_method": [
                   {
                       "Stripe": {
                           "provider": "stripe",
                           "saveble": null,
                           "icon": "stripe.png",
                           "label": "Credit Card",
                           "processor": "frontend",
                           "fields": "",
                           "description": "Millions of companies of all sizes‚Äîfrom startups to Fortune 500s‚Äîuse Stripe‚Äôs software and APIs to accept payments, send payouts, and manage their businesses online.",
                           "options ": false
                       }
                   }
               ],
               "shopper": {
                    "id": 1,
                    "type": "1",
                    "first_name": "Test",
                    "last_name": "Name",
                    "phone": "111111111",
                    "email": "test@test.com",
                    "webauthn": 0,
                    "otp": 1,
                    "otp_id": "92376",
                    "country_code": "94",
                    "currency": "EUR",
                    "verified": "1",
                    "language": "en",
                    "billing_last_used": 1,
                    "shipping_last_used": 1,
                    "payment_method_last_used": 1,
                    "created_at": "2022-07-26T09:10:13.000000Z",
                    "updated_at": "2022-07-26T09:10:13.000000Z",
                    "addresses": [
                        {
                            "1": {
                                "id": 1,
                                "number": "34",
                                "street": "Churchgate",
                                "street2": "Lanum Street",
                                "city": "Lundhaiana",
                                "province": "Western",
                                "postcode": "7732",
                                "country": "Sri Lanka",
                                "nickname": "Ruwan"
                            }
                        },
                        {
                            "2": {
                                "id": 2,
                                "number": "20",
                                "street": "Panamas Bradah",
                                "street2": null,
                                "city": "Parnamas City",
                                "province": "Northen",
                                "postcode": "2282",
                                "country": "India",
                                "nickname": "Ruwan"
                            }
                        }
                    ]
               }
           },
           "errors": [],
           "messages": [],
           "result_info": null
       }
    }
    
```

## Response (AutoFill)

```shell
curl --location --request GET 'https://v3-shopper-api.adup.io/api/v1/init?mode=autofill' \
--header 'autofill-api-key: 4GF545FGNAG45556gddgGDRrwr4'
```

> The above command returns JSON structured like this:

```json

   {
        "success": true,
        "result": {
            "merchant": "",
            "autofill_domain": "https://woocommerce.kodeia.com",
            "api_key": "4GF545FGNAG45556gddgGDRrwr4",
            "user_data": {
                "device_ip": "127.0.0.1",
                "device_country": false,
                "browser_language": null,
                "browser_name": "",
                "is_bot": true,
                "os": ""
            },
            "app_data": {
                "static_base_url": "http://localhost:8000",
                "api_version": "v1.0",
                "countries": {
                    "AF": {
                        "name": "Afghanistan",
                        "dial_code": "+93",
                        "flag": "üá¶üá´"
                    },
                    ...
                }
            },
            "shopper": {
                "id": 1,
                "type": "1",
                "first_name": "Test",
                "last_name": "Name",
                "phone": "111111111",
                "email": "test@test.com",
                "webauthn": 0,
                "otp": 1,
                "otp_id": "92376",
                "country_code": "94",
                "currency": "EUR",
                "verified": "1",
                "language": "en",
                "billing_last_used": 1,
                "shipping_last_used": 1,
                "payment_method_last_used": 1,
                "created_at": "2022-07-26T09:10:13.000000Z",
                "updated_at": "2022-07-26T09:10:13.000000Z",
                "addresses": [
                    {
                        "1": {
                            "id": 1,
                            "number": "34",
                            "street": "Churchgate",
                            "street2": "Lanum Street",
                            "city": "Lundhaiana",
                            "province": "Western",
                            "postcode": "7732",
                            "country": "Sri Lanka",
                            "nickname": "Ruwan"
                        }
                    },
                    {
                        "2": {
                            "id": 2,
                            "number": "20",
                            "street": "Panamas Bradah",
                            "street2": null,
                            "city": "Parnamas City",
                            "province": "Northen",
                            "postcode": "2282",
                            "country": "India",
                            "nickname": "Ruwan"
                        }
                    }
                ]
            }
       },
       "errors": [],
       "messages": [],
       "result_info": null
   }
    
```


# Shopper

## Get Shopper

```shell
curl --location --request GET 'https://v3-shopper-api.adup.io/api/v1/shopper?phone_number=714879796&country_code=00'
```
> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "webauthn": 0,
        "verified": "1",
        "saved": 1,
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

Call this endpoint as user type the phone number

<aside class="warning">Always have a timeout before calling this endpoint when user type the phone number, You may hit the API throttling limits if you call endpoint on each keystroke</aside>

### Method
`Method: GET`

### Endpoint
`https://v3-shopper-api.adup.io/api/v1/shopper`

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
phone_number | int | Yes | Phone number without country code
country_code | int | Yes | Country code without leading plus (+) or zeroes (0)


## Create Shopper

```shell
curl --location --request POST 'https://v3-shopper-api.adup.io/api/v1/shopper' \
--form 'first_name="Sanjaya"' \
--form 'last_name="Senevirathne"' \
--form 'phone_number="714879796d"' \
--form 'country_code="00"' \
--form 'email="sanjaya@yopmail.com"' \
--form 'shipping_address="{\"house_number\":\"ewwer\",\"street\": \"street\",\"street2\":\"ddeeaw\",\"city\":\"yyt\",\"province\":\"province\",\"postcode\":\"postcode\",\"country\":\"Sri Lanka\"}"' \
--form 'billing_address="{\"house_number\":\"ksmeijjs\",\"street\": \"street\",\"street2\":\"ddeeaw\",\"city\":\"yyt\",\"province\":\"province\",\"postcode\":\"postcode\",\"country\":\"Sri Lanka\"}"' \

```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "id": 8,
        "first_name": "Sanjaya",
        "last_name": "Senevirathne",
        "type": "1",
        "name": "Sanjaya Senevirathne",
        "phone": "714879796d",
        "email": "sanjaya@yopmail.com",
        "webauthn": 0,
        "otp": 0,
        "otp_id": null,
        "country_code": "00",
        "currency": "usd",
        "verified": "1",
        "language": "en",
        "billing_last_used": 1,
        "shipping_last_used": 1,
        "payment_method_last_used": 1,
        "created_at": "2022-08-01T05:41:41.000000Z",
        "updated_at": "2022-08-01T05:45:04.000000Z",
        "addresses": [
            {
                "1": {
                    "id": 1,
                    "number": "ewwer",
                    "street": "street",
                    "street2": null,
                    "city": "yyt",
                    "province": null,
                    "postcode": null,
                    "country": "Sri Lanka",
                    "nickname": "Ruwan",
                    "latitude": "3213123",
                    "longitude": "2122292"
                }
            }
        ]
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

Call this endpoint when you want to create a new shopper

<aside class="notice">
   In the response you will receive an api_key which you can use for the Authorization Bearer Token to communicate with the API as the registered shopper
</aside>

### Method
`Method: POST`

### Endpoint
`https://v3-shopper-api.adup.io/api/v1/shopper/`

### Authorization
Type Bearer Token

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
first_name | string | Yes | Shopper's last name
last_name | int | Yes | Shopper's first name
phone_number | int | Yes | Phone number without country code
country_code | int | Yes | Country code without leading plus (+) or zeroes (0)
email | init | Yes | Shopper's email address
shipping_address | json | Yes | Shopper's shipping address
billing_address | json | No | Shopper's billing address (if not specified, shipping address will be used for the billing address as well)


**Address json object should follow the pattern given below**
- nickname field will be autogenereted if not specified
- all fields except nickname & street2 are mandatory


`
{
    "nickname": "Address Nickname",
    "house_number":"No.128",
    "street": "Main Street",
    "street2": "Wallawaya Road",
    "city": "Buttala",
    "province": "Uva",
    "postcode": "0092",
    "country": "Sri Lanka",
    "latitude": "3399223",
    "longitude": "-033323"
}
`

## Edit Shopper

```shell
curl --location --request PATCH 'https://v3-shopper-api.adup.io/api/v1/shopper/api/v1/shopper?first_name=Sanjaya&last_name=Senevirathne&email=sanjaya@yopmail.com&last_used_shipping_address_id=1&last_used_billing_address_id=1'
```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "id": 14,
        "first_name": "Sanjaya",
        "last_name": "Senevirathne",
        "type": "1",
        "phone": "0714879796d",
        "email": "sanjaya@yopmail.com",
        "webauthn": 0,
        "otp": 0,
        "otp_id": null,
        "country_code": "00",
        "currency": "usd",
        "verified": "1",
        "language": "en",
        "billing_last_used": 1,
        "shipping_last_used": 1,
        "payment_method_last_used": 1,
        "created_at": "2022-08-02T05:02:19.000000Z",
        "updated_at": "2022-08-02T05:07:00.000000Z",
        "addresses": [
            {
                "5": {
                    "id": 5,
                    "number": "28",
                    "street": "Lipten",
                    "street2": "Wallawaya Road",
                    "city": "Buttala",
                    "province": "Uva",
                    "postcode": "67892",
                    "country": "Sri Lanka",
                    "nickname": "Kamal"
                }
            }
        ]
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

Call this endpoint when you want edit details of an exisitng shopper (except for editing addresses)

<aside class="notice">
If you want to edit/delete shopper addresses there's a separate endpoint for address manipulation
</aside>

### Method
`Method: PATCH`

###  Endpoint
`https://v3-shopper-api.adup.io/api/v1/shopper?first_name={{first_name}}&last_name={{last_name}}&email={{email}}&last_used_shipping_address_id={{shipping_addres_id}}&last_used_billing_address_id={{billing_address_id}}`

### Authorization
Type Bearer Token

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
first_name | json | Yes | Add your shipping address
last_name | json | No | Add your billing address
email | init | Yes | Add email
shipping_addres_id | string | Yes | Shipping address ID
billing_address_id | string | Yes | Shipping address ID

## Request Shopper OTP

```shell
curl --location --request GET 'https://v3-shopper-api.adup.io/api/v1/shopper/otp?phone_number=714879796&country_code=00'
```

> The above command returns JSON structured like this:

```json
{
    "result": {
        "otp": true,
        "otp_id": "fad17755-a2e6-49c1-b52c-029f631d7e9a"
    },
    "success": true,
    "errors": [],
    "messages": [],
    "result_info": null
}
```

Call this endpoint when you want to send an OTP to verify a shopper 

<aside class="notice">
   SMS provider currently only works in European region, but you will receive an otp_id in response for any valid phone number
</aside>

### Method
`Method: GET`

### Endpoint
`https://v3-shopper-api.adup.io/api/v1/shopper/otp`

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
phone_number | int | Yes | Phone number without country code
country_code | int | Yes | Country code without leading plus (+) or zeroes (0)

## Verify Shopper OTP


```shell
curl --location --request POST 'https://v3-shopper-api.adup.io/api/v1/shopper/otp' \
--form 'otp_id="0f49c246-067b-4ff1-8784-59953f5fbb7f"' \
--form 'otp_code="3323"'
```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "shopper": {
            "id": 1,
            "first_name": "Test",
            "last_name": "Name",
            "type": "1",
            "name": "Test Name",
            "phone": "111111111",
            "email": "test@test.com",
            "webauthn": 0,
            "otp": 1,
            "otp_id": "92080",
            "country_code": "94",
            "currency": "EUR",
            "verified": "1",
            "language": "en",
            "billing_last_used": 1,
            "shipping_last_used": 1,
            "payment_method_last_used": 1,
            "created_at": "2022-08-01T10:23:03.000000Z",
            "updated_at": "2022-08-01T10:23:03.000000Z",
            "addresses": [
                {
                    "2": {
                        "id": 2,
                        "number": "20",
                        "street": "Panamas Bradah",
                        "street2": "Loginor",
                        "city": "Parnamas City",
                        "province": "Northen",
                        "postcode": "7788",
                        "country": "India",
                        "nickname": "Ruwan"
                    }
                }
            ]
        },
        "api_key": "26|oFK9ZonqiYisZrEZ5Rx9x9M5zyCHcdd1NnNqK4l1"
    },
    "errors": [],
    "messages": [],
    "result_info": null
}

```

Call this endpoint when user type the otp code and you are ready to verify

<aside class="notice">
Verification attempts are limited by the API, expect an error if you try to verify an invalid OTP multiple times
</aside>

<aside class="notice">
   In the response you will receive an api_key which you can use for the Authorization Bearer Token to communicate with the API as the verified shopper
</aside>

### Method
`Method: POST`

### Endpoint
https://v3-shopper-api.adup.io/api/v1/shopper/otp

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
otp_id | string | Yes | OTP ID you received when the OTP was sent
otp_code | init | Yes | Verification code user entered


# Address Blocks 

```
   {
        "nickname": "Address Nickname",
        "house_number":"No.128",
        "street": "Main Street",
        "street2": "Wallawaya Road",
        "city": "Buttala",
        "province": "Uva",
        "postcode": "0092",
        "country": "Sri Lanka",
        "latitude": "3399223",
        "longitude": "-033323"
    }
```

**Address json object used in all endpoints listed here should follow the pattern given below**
- nickname field will be autogenereted if not specified
- all fields except nickname & street2 are mandatory


## Create Address Block

```shell
curl --location --request POST 'https://v3-shopper-api.adup.io/api/v1/shopper/address' \
--form 'address="{\"nickname\": \"Address Nickname\",\"house_number\":\"128\",\"street\": \"Main Street\",\"street2\": \"Wallawaya Road\", \"city\": \"Buttala\",\"province\": \"Uva\",\"postcode\": \"0092\",        \"country\": \"Sri Lanka\",\"latitude\": \"3399223\",       \"longitude\": \"-033323\"}"' \
```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "address_id": "2",
        "addresses": [
            {
                "id": 2,
                "shopper_id": "1",
                "nickname": "Sanjayar",
                "address": "{\"house_number\":\"No.12w42\",\"street\": \"street\",\"street2\":\"street2\",\"city\":\"yyt\",\"province\":\"state\",\"postcode\":\"zip\",\"country\":\"Sri Lanka\"}",
                "country": "Sri Lanka",
                "created_at": null,
                "updated_at": "2022-07-28T11:47:34.000000Z"
            },
            {
                "id": 4,
                "shopper_id": "1",
                "nickname": "Sanjaya",
                "address": "{\"house_number\":\"04\",\"street\": \"alley Farms Court\",\"street2\":\"Manthon Aves,\",\"city\":\"London\",\"province\":\"Colven Parks\",\"postcode\":\"21\",\"country\":\"United Kingdom\",\"latitude\": \"21312\",\"longitude\": \"23242\"}",
                "country": "Sri Lanka",
                "created_at": null,
                "updated_at": null
            },
            {
                "id": 5,
                "shopper_id": "1",
                "nickname": "Test Home",
                "address": "{\"house_number\":\"1233\",\"street\": \"Flower Road\",\"street2\":\"Pahala Mawatha\",\"city\":\"Colombo\",\"province\":\"Western\",\"postcode\":\"13322\",\"country\":\"Sri Lanka\"}",
                "country": "Sri Lanka",
                "created_at": "2022-07-28T11:08:20.000000Z",
                "updated_at": "2022-07-28T11:08:20.000000Z"
            },
            {
                "id": 6,
                "shopper_id": "1",
                "nickname": "ok",
                "address": "{\"house_number\":\"No.69\",\"street\": \"XOXO\",\"street2\":\"street2\",\"city\":\"yyt\",\"province\":\"state\",\"postcode\":\"zip\",\"country\":\"Sri Lanka\"}",
                "country": "ok",
                "created_at": "2022-07-28T11:10:30.000000Z",
                "updated_at": "2022-07-28T11:10:30.000000Z"
            }
        ]
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

### Method
`Method: POST`

### Endpoint

`https://v3-shopper-api.adup.io/api/v1/shopper/address`

### Authorization

Type: Bearer Token

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
address | json | Yes | Unique json address string

## Edit Address Block

```shell
curl --location -g --request PATCH 'https://v3-shopper-api.adup.io/api/v1/shopper/address/5?address={"nickname": "Address Nickname","house_number":"128","street": "Main Street","street2": "Wallawaya Road", "city": "Buttala","province": "Uva","postcode": "0092","country": "Sri Lanka","latitude": "3399223","longitude": "-033323"}' \
```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "nickname": "Address Nickname",
        "house_number": "123",
        "street": "Sub Street",
        "street2": "Suyara Road",
        "city": "Buttala",
        "province": "Uva",
        "postcode": "1242",
        "country": "USA",
        "latitude": "3399223",
        "longitude": "-033323",
        "id": 5
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

### Method
`Method: PATCH`

### Endpoint
`https://v3-shopper-api.adup.io/api/v1/shopper/address/{{address_id}}`

### Authorization

Type: Bearer Token

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
address | json | Yes | Unique Json address string

## Delete Address Block

```shell
curl --location --request DELETE 'https://v3-shopper-api.adup.io/api/v1/shopper/address/50'
```

> The above command returns JSON structured like this:

```json
{
    "result": {
        "is_deleted": true
    },
    "success": true,
    "errors": [],
    "messages": [],
    "result_info": null
}
```

### Method
`Method: DELETE`

### Endpoint
`https://v3-shopper-api.adup.io/api/v1/shopper/{{address_id}}`

### Authorization

Type: Bearer Token

### Query Segments

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
address_id | string | Yes | ID of the address to be deleted


# WebAuthn

## Registration Request

```shell
curl --location --request GET 'https://v3-shopper-api.adup.io/api/v1/web_authn/register'
```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "challenge": "{\"publicKey\":{\"challenge\":[13,218,57,160,83,151,224,37,185,66,97,108,95,16,104,242],\"user\":{\"displayName\":\"111111111\",\"name\":\"111111111\",\"id\":[48,48,48,49,101,100,52,55,56,48,98,99,51,54,97,54,49,51,51,101,57,52,100,102,56,48,99,98,48,101,54,97]},\"rp\":{\"id\":\"v3-shopper-dev.adup.io\",\"name\":\"v3-shopper-dev.adup.io\"},\"pubKeyCredParams\":[{\"alg\":-7,\"type\":\"public-key\"},{\"alg\":-257,\"type\":\"public-key\"}],\"authenticatorSelection\":{\"requireResidentKey\":false,\"userVerification\":\"discouraged\"},\"attestation\":null,\"timeout\":60000,\"excludeCredentials\":[],\"extensions\":{\"exts\":true}},\"b64challenge\":\"Ddo5oFOX4CW5QmFsXxBo8g\"}",
        "challenge_id": "chal_113"
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

### Endpoint
https://v3-shopper-api.adup.io/api/v1/web_authn/register

### Method
`Method: GET`

### Authorization

Type: Bearer Token

## Registration Verification

```shell
curl --location --request POST 'https://v3-shopper-api.adup.io/api/v1/web_authn/register' \
--form 'challenge_data="22"' \
--form 'challenge_id="22"'
```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "success": true,
        "shopper": {
            "id": 1,
            "first_name": "Test",
            "last_name": "Name",
            "type": "1",
            "name": "Test Name",
            "phone": "111111111",
            "email": "test@test.com",
            "webauthn": 1,
            "otp": 1,
            "otp_id": "27402",
            "country_code": "94",
            "currency": "EUR",
            "verified": "1",
            "language": "en",
            "billing_last_used": 1,
            "shipping_last_used": 1,
            "payment_method_last_used": 1,
            "created_at": "2022-08-02T10:56:21.000000Z",
            "updated_at": "2022-08-02T13:03:17.000000Z",
            "addresses": [
                {
                    "1": {
                        "id": 1,
                        "number": "34",
                        "street": "Churchgate",
                        "street2": "Lanum Street",
                        "city": "Lundhaiana",
                        "province": "Western",
                        "postcode": "7732",
                        "country": "Sri Lanka",
                        "nickname": "Ruwan"
                    }
                },
                {
                    "2": {
                        "id": 2,
                        "number": "20",
                        "street": "Panamas Bradah",
                        "street2": "Loginor",
                        "city": "Parnamas City",
                        "province": "Northen",
                        "postcode": "2282",
                        "country": "India",
                        "nickname": "Ruwan"
                    }
                }
            ]
        }
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

### Endpoint
https://v3-shopper-api.adup.io/api/v1/web_authn/register

### Method
`Method: POST`

### Authorization

Type: Bearer Token

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
challenge_data | text | Yes | The challenge byte array of webauthn client
challenge_id | init | Yes | The challenge ID you received on registration request

## Login Request

```shell
curl --location --request GET 'https://v3-shopper-api.adup.io/api/v1/web_authn/login?phone_number=76577164389&country_code=94'
```

> The above command returns JSON structured like this:

```json
{
    "result": {
        "challenge": "{\"publicKey\":{\"challenge\":[129,21,36,250,100,163,18,215,122,33,244,17,175,142,3,171],\"user\":{\"displayName\":\"71843081057\",\"name\":\"71843081057\",\"id\":[101,98,55,56,52,101,52,55,98,53,99,51,48,100,57,54,102,101,102,57,97,52,53,98,97,98,51,53,50,51,56,50]},\"rp\":{\"id\":\"v3-shopper-api.adup.io\",\"name\":\"v3-shopper-api.adup.io\"},\"pubKeyCredParams\":[{\"alg\":-7,\"type\":\"public-key\"},{\"alg\":-257,\"type\":\"public-key\"}],\"authenticatorSelection\":{\"requireResidentKey\":false,\"userVerification\":\"discouraged\"},\"attestation\":null,\"timeout\":60000,\"excludeCredentials\":[],\"extensions\":{\"exts\":true}},\"b64challenge\":\"gRUk-mSjEtd6IfQRr44Dqw\"}",
        "challenge_id": "chal_66"
    },
    "success": true,
    "errors": [],
    "messages": [],
    "result_info": null
}
```

### Endpoint
https://v3-shopper-api.adup.io/api/v1/web_authn/login?phone_number={{phone_number}}&country_code={{country_code}}

### Method
`Method: GET`

### Authorization

Type: Bearer Token

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
phone_number | int | Yes | Phone number without country code
country_code | int | Yes | Country code without leading plus (+) or zeroes (0)

## Login Verification

```shell
curl --location --request POST 'https://v3-shopper-api.adup.io/api/v1/web_authn/login' \
--form 'challenge_data="22"' \
--form 'challenge_id="22"'
```

> The above command returns JSON structured like this:

```json
{
    "success": true,
    "result": {
        "success": true,
        "shopper": {
            "id": 1,
            "first_name": "Test",
            "last_name": "Name",
            "type": "1",
            "name": "Test Name",
            "phone": "111111111",
            "email": "test@test.com",
            "webauthn": 1,
            "otp": 1,
            "otp_id": "27402",
            "country_code": "94",
            "currency": "EUR",
            "verified": "1",
            "language": "en",
            "billing_last_used": 1,
            "shipping_last_used": 1,
            "payment_method_last_used": 1,
            "created_at": "2022-08-02T10:56:21.000000Z",
            "updated_at": "2022-08-02T13:03:17.000000Z",
            "addresses": [
                {
                    "1": {
                        "id": 1,
                        "number": "34",
                        "street": "Churchgate",
                        "street2": "Lanum Street",
                        "city": "Lundhaiana",
                        "province": "Western",
                        "postcode": "7732",
                        "country": "Sri Lanka",
                        "nickname": "Ruwan"
                    }
                }
            ]
        },
        "api_key": "79|XOIEoSIi0jYDfyt6UOOBUxDykbR4tOimAC09s4P8"
    },
    "errors": [],
    "messages": [],
    "result_info": null
}
```

<aside class="notice">
   In the response you will receive an api_key which you can use for the Authorization Bearer Token to communicate with the API as the logged in shopper
</aside>

### Endpoint
https://v3-shopper-api.adup.io/api/v1/web_authn/login

### Method
`Method: POST`

### Authorization

Type: Bearer Token

### Query Parameters

Parameter | Type | Required | Description
--------- | ------- |  ------- | -----------
challenge_data | text | Yes | The challenge byte array of webauthn client
challenge_id | init | Yes | The challenge ID you received on login request


## Test Environment

### URL
[WebAuthn Test Environment](https://v3-shopper-api.adup.io/test)

# Postman Collection

## URL
[Postman Collection](https://documenter.getpostman.com/view/3234215/UzQvtQet)